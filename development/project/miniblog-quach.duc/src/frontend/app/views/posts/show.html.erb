 <!-- Page Content -->
<div class="container">
 <!-- Page Heading/Breadcrumbs -->
  <div class="row">
      <%= render  partial: '/shared/flash/flash_messages', locals: {notice_type:"notice"} %>
      <div class="col-lg-12">
          <h2 class="page-header"><%= @post.title.upcase %>
<!--               <small><a href="#"><%= link_to "Author","/users/"+@post.user_id.to_s %></a>
              </small> -->
          </h2>
          <ol class="breadcrumb">
              <li><a href="/">Home</a>
              </li>
              <li class="active">List All Post</li>
              <li class="active"><%= @post.title %></li>
          </ol>
      </div>
  </div>
  <div class="row">
      <!-- Blog Post Content Column -->
      <div class="col-lg-8">
          <!-- Blog Post -->
          <hr>
          <!-- Date/Time -->
          <p>
              <i class="fa fa-clock-o"></i> Posted on <%= @post.created_at.strftime("%d/%m/%Y %I:%M") %>
          </p>
          <hr>
          <!-- Preview Image -->
           <% if @post.thumbnail_path %>
            <div  class="img-responsive">
              <div style="width: 750px; height:300px; border:solid">
                  <%= image_tag "/upload/"+@post.thumbnail_path,:style => " width: 100%; height: 100%; object-fit: contain;" %>
                </div>
            </div>
          <% else %>
             <div  class="img-responsive">
               <div style="width: auto; height:300px; border:solid">
                  <%=  image_tag "no_images.jpeg",:style => " width: 100%; height: 100%; object-fit: contain;" %>
                </div>
              </div>
          <% end %>
          <hr>
          <!-- Post Content -->
          <div class="col-md-12">
            <p class="lead"><%= @post.description %></p>
          </div>
          <div class="col-md-12" style="overflow:auto;">
            <p><%= raw(@post.content) %></p>
          </div>
          <div>&nbsp;</div>
          <hr>
          <!-- Check login -->
           <% if current_user && current_user[:id] == @post[:user_id] %>
               <ul class="list-inline">
                    <li><%= button_to 'Edit', edit_post_path(@post[:id]),:method => :get,:remote => true, "data-target" => "#myModal", "data-toggle" => "modal", :class => "btn btn-primary" %></li>
                    <li><%= link_to 'Destroy', @post, method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-danger" %></li>
                </ul>
                <hr>
            <% end %>
          <!-- Blog Comments -->
          <div id="list_comments">
            <!-- Posted Comments -->
            <% @post_comments.each do |post_comment| %>
              <% @user_comment = get_user_info(post_comment.user_id) %>
              <!-- Comment -->
                  <div class="media">
                      <a class="pull-left" href="#">
                          <% if @user_comment.avatar_path %>
                            <div style="width: 50px; height:50px; border:solid">
                              <%= image_tag "/upload/"+@user_comment.avatar_path, :style => " width: 100%; height: 100%; object-fit: contain;" %>
                            </div>
                          <% else %>
                            <div style="width: 50px; height:50px; border:solid">
                              <%= image_tag "no_images.jpeg", :style => " width: 100%; height: 100%; object-fit: contain;" %>
                            </div>
                          <% end %>
                      </a>
                      <div class="media-body">
                          <h4 class="media-heading"> <%= @user_comment.username %>
                              <small><%= post_comment.updated_at.strftime("%d/%m/%Y %I:%M") %></small>
                          </h4>
                           <div class="well">
                              <div  style="overflow:auto;">
                                <!-- TODO: format comment -->
                                <%= post_comment.content %>
                             </div>
                           </div>
                        <% if current_user && current_user[:id] == post_comment.user_id %>
                          <ul class="list-inline">
                            <li><%= button_to 'Edit', edit_comment_path(post_comment.id),:method => :get,:remote => true, "data-target" => "#myModal", "data-toggle" => "modal", :class => "btn btn-primary btn-xs" %></li>
                            <li><%= link_to 'Destroy', post_comment, method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-danger btn-xs" %></li>
                          </ul>
                        <% end %>

                      </div>
                  </div>
            <% end %>
          </div>
          <!-- Comments Form -->
              <% unless current_user %>
                <div class="well">
                  <h4>Log in to Comment</h4>
                </div>
              <% else %>
                <div class="well">
                      <h4>Leave a Comment:</h4>
                      <%= form_for @comment, :remote => true do |f| %>
                      <form role="form">
                          <div class="form-group">
                              <%= text_area(:comment, :content , cols: 40, rows: 3, class: 'form-control', required: true) %>
                          </div>
                          <%= f.hidden_field :user_id, :value => current_user[:id]  %>
                          <%= f.hidden_field :post_id, :value => @post.id  %>
                          <%= f.submit 'Comment', :class => 'btn btn-success', :disable_with => "Comment...", :method => :get, :remote => true %>
                      </form>
                      <% end %>
                </div>
              <% end %>
          <hr>
      </div>
      <!-- Blog Sidebar Widgets Column -->
      <div class="col-md-4">
          <!-- Blog Categories Well -->
          <%= render  partial: 'shared/categories/list_categories' %>
      </div>
  </div>
</div>
<div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="myModal" role="dialog" tabindex="-1"></div>